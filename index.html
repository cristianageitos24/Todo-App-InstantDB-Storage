<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List</title>
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <link rel="stylesheet" href="style.css">
    <!-- InstantDB SDK and App -->
    <script type="module" src="app.js"></script>
</head>
<body>
    <!-- Authentication UI (shown when not signed in) -->
    <div id="auth-container" class="auth-container">
        <div class="auth-box">
            <h2>Welcome to Todo App</h2>
            <p>Sign in to access your todos across all devices</p>
            <form id="auth-form">
                <div class="form-group">
                    <input type="email" id="auth-email" placeholder="Enter your email" required autocomplete="email">
                </div>
                <div id="magic-code-group" class="form-group" style="display: none;">
                    <input type="text" id="magic-code" placeholder="Enter code from email" maxlength="6" autocomplete="off">
                    <p class="auth-hint">Check your email for the magic code</p>
                </div>
                <button type="submit" id="auth-submit" class="modal-btn primary">Send Magic Code</button>
            </form>
            <div id="auth-error" class="auth-error" style="display: none;"></div>
        </div>
    </div>

    <!-- Main App UI (shown when signed in) -->
    <div id="app-container" class="app-container" style="display: none;">
        <!-- User Profile Section -->
        <div class="user-profile">
            <div class="profile-controls">
                <input type="text" id="display-name-input" class="display-name-input" placeholder="Your Name's Todo List" maxlength="50">
                <button id="sign-out-btn" class="sign-out-btn" title="Sign Out">Sign Out</button>
            </div>
        </div>

        <h1 id="user-title">Loading...</h1>
        <div class="wrapper">
        <form>
            <input id="todo-input" type="text" 
            placeholder="write anything and hit enter to add" autocomplete="off">
            <button id="add-button" type="submit">ADD</button>
        </form>
        <ul id="todo-list">
            <!-- <li class="todo">
                <input type="checkbox" id="todo-1">
                <label class="custom-checkbox" for="todo-1">
                    <svg fill="transparent" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                        <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                    </svg>
                </label>
                <label for="todo-1" class="todo-text">
                    webdev project with html, css and js
                </label>
                <button class="delete-button">
                    <svg fill="var(--secondary-color)" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                        <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                    </svg>
                </button>
            </li>
            <li class="todo">
                <input type="checkbox" id="todo-2">
                <label class="custom-checkbox" for="todo-2">
                    <svg fill="transparent" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                        <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                    </svg>
                </label>
                <label for="todo-2" class="todo-text">
                    webdev project with html, css and js
                </label>
                <button class="delete-button">
                    <svg fill="var(--secondary-color)" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                        <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                    </svg>
                </button>
            </li> -->
        </ul>
        </div>
    </div>

    <!-- Follow-up Modal -->
    <div id="followup-modal" class="modal">
        <div class="modal-content">
            <h2>Add Follow-up Reminder?</h2>
            <p>Would you like to set a calendar reminder for this todo?</p>
            <div class="modal-buttons">
                <button id="followup-yes" class="modal-btn primary">Yes, Add Follow-up</button>
                <button id="followup-no" class="modal-btn secondary">No, Skip</button>
            </div>
        </div>
    </div>

    <!-- Follow-up Form Modal -->
    <div id="followup-form-modal" class="modal">
        <div class="modal-content form-modal">
            <h2>Set Follow-up Details</h2>
            <form id="followup-form">
                <div class="form-group">
                    <label for="followup-date">Date & Time:</label>
                    <input type="datetime-local" id="followup-date" required>
                </div>
                <div class="form-group">
                    <label for="followup-notes">Additional Notes (optional):</label>
                    <textarea id="followup-notes" rows="3" placeholder="Add any additional details..."></textarea>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="modal-btn primary">Create Calendar Event</button>
                    <button type="button" id="followup-cancel" class="modal-btn secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notes Modal -->
    <div id="notes-modal" class="modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 id="notes-title" style="margin: 0; color: var(--accent-color);">Todo Notes</h2>
                <button id="notes-close" class="modal-btn secondary" style="padding: 8px 16px; font-size: 0.9rem;">Close</button>
            </div>
            <div id="notes-content" style="color: var(--text-color); line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"></div>
        </div>
    </div>
</body>
</html>